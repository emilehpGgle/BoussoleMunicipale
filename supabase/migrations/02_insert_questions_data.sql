-- ========================================================================
-- MIGRATION 2: INS√âRER LES QUESTIONS DE LA BOUSSOLE MUNICIPALE
-- ========================================================================
-- √Ä ex√©cuter dans Supabase SQL Editor APR√àS 01_create_tables.sql
-- Date: 2025-09-21
-- ========================================================================

-- ========================================================================
-- INS√âRER LES 21 QUESTIONS DE LA BOUSSOLE MUNICIPALE
-- ========================================================================

INSERT INTO questions (
  id, text, category, response_type, description, response_format,
  agreement_options, importance_options, importance_direct_options,
  priority_options, custom_agreement_labels, custom_importance_direct_labels,
  order_index, municipality_id, is_generic
) VALUES

-- Q1 - Tramway
('q1_tramway',
 'La municipalit√© devrait investir davantage dans le projet de tramway, m√™me si cela implique une hausse des taxes municipales.',
 'Mobilit√© et transport',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 0,
 'quebec',
 false),

-- Q2 - Pistes cyclables
('q2_pistes_cyclables',
 'La municipalit√© devrait d√©velopper davantage les pistes cyclables, m√™me si cela r√©duit l''espace pour les voitures.',
 'Mobilit√© et transport',
 'agreement',
 'Cette question √©value la priorit√© accord√©e aux transports actifs versus l''automobile.',
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 1,
 'quebec',
 true),

-- Q3 - Troisi√®me lien
('q3_troisieme_lien',
 'La Ville de Qu√©bec devrait activement soutenir la r√©alisation d''un troisi√®me lien routier entre Qu√©bec et L√©vis.',
 'Mobilit√© et transport',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 2,
 'quebec',
 false),

-- Q4 - Priorit√© mobilit√© active
('q4_priorite_mobilite_active',
 'Pour am√©liorer l''attractivit√© du centre-ville, la priorit√© devrait √™tre donn√©e aux pi√©tons, cyclistes et au transport collectif, m√™me si cela implique de r√©duire l''espace d√©di√© √† l''automobile (stationnements, voies de circulation, etc.).',
 'Mobilit√© et transport',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 3,
 'quebec',
 true),

-- Q5 - Quotas logements abordables
('q5_quotas_logements_abordables',
 'La municipalit√© devrait imposer des quotas de logements abordables dans tous les nouveaux projets de d√©veloppement r√©sidentiel.',
 'Logement et am√©nagement',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 4,
 'quebec',
 true),

-- Q6 - R√©duction d√©penses et taxes
('q6_reduction_depenses_taxes',
 'Il est prioritaire de r√©duire les d√©penses municipales pour √©viter une hausse des taxes fonci√®res.',
 'Finances municipales',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 5,
 'quebec',
 true),

-- Q7 - Immeubles de grande hauteur
('q7_immeubles_grande_hauteur',
 'La municipalit√© devrait autoriser la construction d''immeubles de plus grande hauteur pour r√©pondre aux besoins en logement, m√™me dans les quartiers historiques.',
 'Logement et am√©nagement',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 6,
 'quebec',
 true),

-- Q8 - Interdire essence centre-ville
('q8_interdire_essence_centre_ville',
 'La Ville devrait interdire l''acc√®s des v√©hicules √† essence dans certaines zones du centre-ville d''ici 2030.',
 'Environnement et √©nergie',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 7,
 'quebec',
 true),

-- Q9 - Protection espaces verts
('q9_protection_espaces_verts',
 'Il est important de prot√©ger les espaces verts et les milieux naturels, m√™me si cela limite le d√©veloppement urbain.',
 'Environnement et √©nergie',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 8,
 'quebec',
 true),

-- Q10 - Transition carboneutre
('q10_transition_carboneutre',
 'La municipalit√© devrait exiger que tous les nouveaux b√¢timents soient carboneutres d''ici 2030, m√™me si cela augmente les co√ªts de construction.',
 'Environnement et √©nergie',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 9,
 'quebec',
 true),

-- Q11 - R√©duction d√©chets
('q11_reduction_dechets',
 'Am√©liorer la collecte des ordures et du recyclage devrait √™tre une priorit√©, m√™me si cela n√©cessite des investissements importants.',
 'Environnement et √©nergie',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 10,
 'quebec',
 true),

-- Q12 - Augmentation taxes
('q12_augmentation_taxes',
 'La municipalit√© devrait augmenter les taxes fonci√®res pour financer des projets √©coresponsables, m√™me si cela affecte le budget des citoyens.',
 'Environnement et √©nergie',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 11,
 'quebec',
 true),

-- Q13 - Pouvoir conseils quartier
('q13_pouvoir_conseils_quartier',
 'Les conseils de quartier devraient avoir plus de pouvoir d√©cisionnel sur les projets qui affectent leur secteur.',
 'Gouvernance et participation',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 12,
 'quebec',
 true),

-- Q14 - R√©duction dette
('q14_reduction_dette',
 'R√©duire la dette municipale devrait √™tre une priorit√©, m√™me si cela n√©cessite de reporter certains projets.',
 'Finances municipales',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 13,
 'quebec',
 true),

-- Q15 - Avantages fiscaux entreprises
('q15_avantages_fiscaux_entreprises',
 'La municipalit√© devrait offrir des avantages fiscaux aux entreprises pour les attirer, m√™me si cela r√©duit les revenus municipaux √† court terme.',
 'D√©veloppement √©conomique',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 14,
 'quebec',
 true),

-- Q16 - Limitation touristes
('q16_limitation_touristes',
 'La municipalit√© devrait limiter le nombre de touristes dans certains secteurs pour pr√©server la qualit√© de vie des r√©sidents.',
 'D√©veloppement √©conomique',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 15,
 'quebec',
 true),

-- Q17 - Soutien organismes communautaires
('q17_soutien_organismes_communautaires',
 'La municipalit√© devrait augmenter le financement des organismes communautaires, m√™me si cela n√©cessite une hausse des taxes.',
 'Services sociaux et communautaires',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 16,
 'quebec',
 true),

-- Q18 - Augmentation effectifs policiers
('q18_augmentation_effectifs_policiers',
 'La municipalit√© devrait augmenter les effectifs policiers pour am√©liorer la s√©curit√©, m√™me si cela n√©cessite des investissements importants.',
 'S√©curit√© publique',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 17,
 'quebec',
 true),

-- Q19 - Investissement infrastructures loisirs
('q19_investissement_infrastructures_loisirs_sportives',
 'Il est important d''investir davantage dans les parcs, ar√©nas et installations sportives, m√™me si cela augmente les d√©penses municipales.',
 'Services sociaux et communautaires',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 18,
 'quebec',
 true),

-- Q20 - Protection patrimoine
('q20_protection_patrimoine',
 'La protection du patrimoine architectural et historique devrait √™tre une priorit√©, m√™me si cela limite les possibilit√©s de d√©veloppement.',
 'Logement et am√©nagement',
 'agreement',
 NULL,
 'standard',
 '["FA", "PA", "N", "PD", "FD", "IDK"]',
 '[5, 4, 3, 2, 1]',
 NULL,
 NULL,
 NULL,
 NULL,
 19,
 'quebec',
 true),

-- Q21 - Priorit√©s municipales (question de priorit√©)
('q21_priorites_municipales',
 'Classez par ordre d''importance les enjeux suivants pour votre municipalit√©',
 'Gouvernance et participation',
 'priority_ranking',
 NULL,
 'priority',
 NULL,
 NULL,
 NULL,
 '["Transport et mobilit√©", "Logement abordable", "Environnement et d√©veloppement durable", "S√©curit√© publique", "D√©veloppement √©conomique", "Services municipaux", "Finances municipales"]',
 NULL,
 NULL,
 20,
 'quebec',
 true)

ON CONFLICT (id) DO UPDATE SET
  text = EXCLUDED.text,
  category = EXCLUDED.category,
  response_type = EXCLUDED.response_type,
  description = EXCLUDED.description,
  response_format = EXCLUDED.response_format,
  agreement_options = EXCLUDED.agreement_options,
  importance_options = EXCLUDED.importance_options,
  importance_direct_options = EXCLUDED.importance_direct_options,
  priority_options = EXCLUDED.priority_options,
  custom_agreement_labels = EXCLUDED.custom_agreement_labels,
  custom_importance_direct_labels = EXCLUDED.custom_importance_direct_labels,
  order_index = EXCLUDED.order_index,
  municipality_id = EXCLUDED.municipality_id,
  is_generic = EXCLUDED.is_generic,
  updated_at = NOW();

-- Message de confirmation
DO $$
BEGIN
  RAISE NOTICE '‚úÖ 21 questions ins√©r√©es pour Qu√©bec';
  RAISE NOTICE 'üìã Prochaine √©tape: Ex√©cuter 03_insert_parties_data.sql';
END
$$;